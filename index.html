<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1,maximum-scale=1,user-scalable=no">
  <title>Defender — PWA (Tributo)</title>
  <meta name="description" content="Tributo didattico a Defender (1981, Williams). PWA giocabile su iPhone, Android e desktop.">
  <meta name="theme-color" content="#0b0f19">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icons/icon-180.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="format-detection" content="telephone=no">
  <style>
    :root{
      --bg:#0b0f19;--panel:#111625;--accent:#49f3ff;--text:#e9eef5;--muted:#91a0ba;
      --danger:#ff3b58;--ok:#49ffa1;--warn:#ffd24d;
    }
    *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
    html,body{margin:0;height:100%;background:var(--bg);color:var(--text);font:14px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial}
    #wrap{display:flex;flex-direction:column;min-height:100vh}
    header{padding:.6rem 1rem;background:linear-gradient(180deg,#0e1425,#0b0f19);display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid #1a2336}
    header h1{margin:0;font-size:1rem;letter-spacing:.06em;color:var(--accent)}
    header .meta{font-size:.8rem;color:var(--muted)}
    #stageWrap{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:.5rem}
    canvas{background:#05060a;border:1px solid #20293d;border-radius:8px;width:100%;max-width:900px;touch-action:none}
    #hud{display:flex;gap:.8rem;flex-wrap:wrap;justify-content:center;align-items:center;margin:.5rem 0}
    .badge{padding:.25rem .5rem;border:1px solid #27324a;border-radius:6px;color:var(--muted)}
    .badge strong{color:var(--text)}
    #touch{position:fixed;inset:auto 0 0 0;display:grid;grid-template-columns:1fr 1fr 1fr;gap:.5rem;padding:.6rem;background:linear-gradient(180deg,#0b0f19d0,#0b0f19f0);backdrop-filter:blur(6px);}
    .btn{user-select:none;-webkit-user-select:none;border:1px solid #27324a;border-radius:10px;padding:1rem .5rem;text-align:center;color:#dbe4f5}
    .btn:active{background:#1a2236}
    .hideTouch{display:none}
    @media (hover:none) and (pointer:coarse){
      .hideTouch{display:block}
      header{padding:.4rem .8rem}
    }
    footer{padding:.6rem 1rem;color:var(--muted);text-align:center}
    footer a{color:var(--accent);text-decoration:none}
  </style>
</head>
<body>
<div id="wrap">
  <header>
    <h1>DEFENDER — tributo PWA</h1>
    <div class="meta">© 2025 pezzaliAPP — MIT</div>
  </header>

  <div id="stageWrap">
    <canvas id="game" width="900" height="520" aria-label="Defender tribute canvas" role="img"></canvas>
    <div id="hud">
      <div class="badge">Punteggio: <strong id="score">0</strong></div>
      <div class="badge">Vite: <strong id="lives">3</strong></div>
      <div class="badge">Umanoidi: <strong id="humans">6</strong></div>
      <div class="badge">Livello: <strong id="level">1</strong></div>
      <div class="badge">FPS: <strong id="fps">60</strong></div>
      <div class="badge"><button id="btnPause" class="btn" style="padding:.3rem .6rem">⏯︎ Pausa</button></div>
      <div class="badge"><button id="btnRestart" class="btn" style="padding:.3rem .6rem">⟲ Restart</button></div>
      <div class="badge hideTouch">Tasti: ⬅️➡️ su/giù • Z=Fuoco • X=Missile • P=Pausa</div>
    </div>
  </div>

  <div id="touch" class="hideTouch">
    <div class="btn" data-hold="left">◀︎</div>
    <div class="btn" data-tap="fire">FIRE</div>
    <div class="btn" data-hold="right">▶︎</div>
    <div class="btn" data-hold="up">▲</div>
    <div class="btn" data-tap="bomb">MISSILE</div>
    <div class="btn" data-hold="down">▼</div>
  </div>

  <footer>
    Tributo didattico non commerciale a <em>Defender</em> (1981, Williams). <a href="readme.html" target="_blank" rel="noopener">Istruzioni / Readme</a>.
  </footer>
</div>

<script src="app.js"></script>
<script>
if('serviceWorker' in navigator){window.addEventListener('load',()=>navigator.serviceWorker.register('./sw.js'));}
</script>
</body>
</html>
